(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{36:function(e,t,a){e.exports=a(66)},58:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(18),i=a.n(r),o=a(14),l=a(15),u=a(19),d=a(17),c=a(16),m=a(11),h=a(12),f=function(e){return n.a.createElement("div",Object.assign({className:e.size.split(" ").map((function(e){return"col-"+e})).join(" ")},e),e.children)},p=function(e){return n.a.createElement("div",Object.assign({id:e.id,className:"container".concat("true"===e.fluid?"-fluid":"")},e),e.children)},g=function(e){return n.a.createElement("div",Object.assign({className:"row".concat(e.fluid?"-fluid":"")},e),e.children)},E=function(e){return n.a.createElement("div",{className:e.formgroupclass},n.a.createElement("label",{htmlFor:"inputField"},e.label),n.a.createElement("input",Object.assign({className:"form-control",id:"inputField"},e)),"true"===e.isvalid?"":n.a.createElement("span",{className:"help-block"},e.fielderror))},v=function(e){return n.a.createElement("button",Object.assign({},e,{className:"btn btn-pill btn-light btn-lg"}),e.children)},w=function(e){return n.a.createElement("div",{className:e.formgroupclass},n.a.createElement("label",{htmlFor:"bugDescriptionField"},e.label),n.a.createElement("textarea",Object.assign({className:"form-control",id:"bugDescriptionField",rows:"5"},e)),"true"===e.isvalid?"":n.a.createElement("span",{className:"help-block"},e.fielderror))},I=a(5),C=a.n(I),N=function(){return C.a.get("/api/user")},b=function(e){return C.a.post("/api/user/sendForgotPasswordEmail",e)},q=function(e){return C.a.post("/api/user/updateUser",e)},D=function(e){return C.a.post("/api/user/login",e)},M=function(e){return C.a.post("/api/user/saveUser",e)},Q=function(e){return C.a.post("/api/question/saveQuestion",e)},k=function(e){return C.a.post("/api/question/updateQuestion",e)},B=function(e){return C.a.post("/api/question/deleteQuestion",e)},A=function(e){return C.a.get("/api/question/getAllQuestions/"+e)},F=function(e){return console.log("hi"),console.log(e),C.a.get("/api/questionnaire/getQuestionnaireFromDB/"+e.questionnaireID)},P=function(e){return C.a.post("/api/questionnaire/saveQuestionnaire",e)},T=function(e){return console.log("i'm in API!!!"),C.a.get("/api/questionnaire/getAllQuestionnairesOfUser/"+e.mongoID)},S=function(e){return C.a.post("/api/questionnaire/attachUserToQuestionnaire",e)},y=function(e){return C.a.post("/api/questionnaire/deleteQuestionnaire",e)},V=function(e){return C.a.post("/api/questionnaire/updateQuestionnaire",e)},x=(a(58),function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).formatInput=function(e){var t=e.target.getAttribute("name");s.setState(Object(h.a)({},t,e.target.value.trim()))},s.handleFormSubmit=function(e){e.preventDefault(),s.setState({emailAddressValid:!0,firstNameValid:!0,lastNameValid:!0,passwordValid:!0,formErrors:{firstName:"",lastName:"",emailAddress:"",password:""}},(function(){s.validateFields()}))},s.handleLoginButtonClick=function(e){e.preventDefault(),s.setState({loginOrCreateAccountButtonClicked:!0,loginButtonClicked:!0,forgotPasswordButtonClicked:!1,emailAddressValid:!0,firstNameValid:!0,lastNameValid:!0,passwordValid:!0,formErrors:{firstName:"",lastName:"",emailAddress:"",password:"",serverErrorMessage:""}})},s.handleCreateAccountButtonClick=function(e){e.preventDefault(),s.setState({loginOrCreateAccountButtonClicked:!0,loginButtonClicked:!1,forgotPasswordButtonClicked:!1,emailAddressValid:!0,firstNameValid:!0,lastNameValid:!0,passwordValid:!0,formErrors:{firstName:"",lastName:"",emailAddress:"",password:"",serverErrorMessage:""}})},s.handleForgotPasswordButtonClick=function(e){e.preventDefault(),s.setState({loginOrCreateAccountButtonClicked:!1,loginButtonClicked:!1,forgotPasswordButtonClicked:!0,emailAddressValid:!0,firstNameValid:!0,lastNameValid:!0,passwordValid:!0,formErrors:{firstName:"",lastName:"",emailAddress:"",password:"",serverErrorMessage:""}})},s.state={firstName:"",lastName:"",emailAddress:"",password:"",formErrors:{firstName:"",lastName:"",emailAddress:"",password:""},redirectTo:null,firstNameValid:!1,lastNameValid:!1,passwordValid:!1,emailAddressValid:!1,loginOrCreateAccountButtonClicked:!1,loginButtonClicked:!0,forgotPasswordButtonClicked:!1,successMessage:"",serverErrorMessage:""},s}return Object(l.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(h.a)({},e.target.id,e.target.value))}},{key:"componentWillReceiveProps",value:function(e){this.setState({serverErrorMessage:this.props.serverErrorMessage})}},{key:"validateFields",value:function(){var e=this,t=this.state.formErrors,a=this.state.emailAddressValid,s=this.state.firstNameValid,n=this.state.lastNameValid,r=this.state.passwordValid;a=new RegExp(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i).test(this.state.emailAddress),t.emailAddress=a?"":"Please provide a valid email",s=this.state.firstName.length>0,t.firstName=s?"":"Please provide your first name",n=this.state.lastName.length>0,t.lastName=n?"":"Please provide your last name",this.state.loginButtonClicked||(r=this.state.password.length>=6,t.password=r?"":"Please provide a password of atleast 8 characters"),this.setState({formErrors:t,emailAddressValid:a,firstNameValid:s,lastNameValid:n,passwordValid:r},(function(){e.state.loginButtonClicked&&a?e.props._login(e.state.emailAddress,e.state.password):e.state.loginOrCreateAccountButtonClicked&&!e.state.loginButtonClicked&&a&&s&&n&&r?e.saveUser():e.state.forgotPasswordButtonClicked&&e.sendForgotPasswordEmail()}))}},{key:"errorClass",value:function(e){return 0===e.length?"":"has-error"}},{key:"sendForgotPasswordEmail",value:function(){var e=this,t={email:this.state.emailAddress};b(t).then((function(t){t.data.error?e.setState({serverErrorMessage:t.data.error}):e.setState({serverErrorMessage:"An email has been sent."})}))}},{key:"saveUser",value:function(){var e=this,t={userId:null,username:this.state.emailAddress,password:this.state.password,email:this.state.emailAddress,user_email:this.state.email,firstName:this.state.firstName,lastName:this.state.lastName};M(t).then((function(a){a.data.error?e.setState({serverErrorMessage:a.data.error}):e.props._login(e.state.emailAddress,e.state.password,t)}))}},{key:"render",value:function(){return this.props.redirectTo?n.a.createElement(m.a,{to:{pathname:this.props.redirectTo}}):n.a.createElement(p,{id:"container",fluid:"true"},n.a.createElement(g,{id:"mainRow"},n.a.createElement("hr",{id:"hline"}),n.a.createElement(f,{id:"formCol",size:"sm-6"},n.a.createElement("h1",{id:"loginTitle"},"Decision Tree Questionnaire Maker"),this.state.loginOrCreateAccountButtonClicked?n.a.createElement("div",null,this.state.loginButtonClicked?n.a.createElement("h3",{id:"formHeader"},"Login"):n.a.createElement("h3",{id:"formHeader"},"Create Account"),n.a.createElement("form",null,this.state.loginButtonClicked?"":n.a.createElement("div",null,n.a.createElement(E,{label:"First Name",onBlur:this.formatInput.bind(this),isvalid:this.state.firstNameValid.toString(),fielderror:this.state.formErrors.firstName,formgroupclass:"form-group ".concat(this.errorClass(this.state.formErrors.firstName)),value:this.state.firstName,id:"firstName",onChange:this.handleChange.bind(this),name:"firstName"}),n.a.createElement(E,{label:"Last Name",onBlur:this.formatInput.bind(this),isvalid:this.state.lastNameValid.toString(),fielderror:this.state.formErrors.lastName,formgroupclass:"form-group ".concat(this.errorClass(this.state.formErrors.lastName)),value:this.state.lastName,id:"lastName",onChange:this.handleChange.bind(this),name:"lastName"})),n.a.createElement(E,{label:"Email Address",onBlur:this.formatInput.bind(this),isvalid:this.state.emailAddressValid.toString(),fielderror:this.state.formErrors.emailAddress,formgroupclass:"form-group ".concat(this.errorClass(this.state.formErrors.emailAddress)),value:this.state.emailAddress,id:"emailAddress",onChange:this.handleChange.bind(this),name:"emailAddress"}),n.a.createElement(E,{label:"Password",type:"password",onBlur:this.formatInput.bind(this),isvalid:this.state.passwordValid.toString(),fielderror:this.state.formErrors.password,formgroupclass:"form-group ".concat(this.errorClass(this.state.formErrors.password)),value:this.state.password,id:"password",onChange:this.handleChange.bind(this),name:"password"}),n.a.createElement(v,{onClick:this.handleFormSubmit.bind(this)}," Submit "),this.state.loginButtonClicked?n.a.createElement("div",null,n.a.createElement("h3",{id:"formFooterLink",className:"formFooterLink",onClick:this.handleCreateAccountButtonClick.bind(this)},"Create Account instead?"),n.a.createElement("h3",{id:"formFooterLink",className:"formFooterLink",onClick:this.handleForgotPasswordButtonClick.bind(this)},"Forgot Password?")):n.a.createElement("div",null,n.a.createElement("h3",{id:"formFooterLink",className:"formFooterLink",onClick:this.handleLoginButtonClick.bind(this)},"Login instead?"),n.a.createElement("h3",{id:"formFooterLink",className:"formFooterLink",onClick:this.handleForgotPasswordButtonClick.bind(this)},"Forgot Password?"))),n.a.createElement("span",{className:"help-block serverErrorMessage"},this.state.serverErrorMessage),n.a.createElement("br",null)):n.a.createElement("div",null,this.state.forgotPasswordButtonClicked?n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement("strong",null,"Please enter your email address. If correct, we will send you an email!")),n.a.createElement("p",null,"Email Address"),n.a.createElement(E,{onBlur:this.formatInput.bind(this),isvalid:this.state.emailAddressValid.toString(),fielderror:this.state.formErrors.emailAddress,formgroupclass:"form-group ".concat(this.errorClass(this.state.formErrors.emailAddress)),value:this.state.emailAddress,id:"emailAddress",onChange:this.handleChange.bind(this),name:"emailAddress"}),n.a.createElement(v,{onClick:this.handleFormSubmit.bind(this)}," Submit "),n.a.createElement("h3",{id:"formFooterLink",className:"formFooterLink",onClick:this.handleLoginButtonClick.bind(this)},"Login instead?"),n.a.createElement("h3",{id:"formFooterLink",className:"formFooterLink",onClick:this.handleCreateAccountButtonClick.bind(this)},"Create Account instead?")):n.a.createElement("div",null,n.a.createElement(v,{onClick:this.handleLoginButtonClick.bind(this)}," Login "),n.a.createElement(v,{onClick:this.handleCreateAccountButtonClick.bind(this)}," Create Account "),n.a.createElement(v,{onClick:this.handleForgotPasswordButtonClick.bind(this)},"Forgot Password?")),n.a.createElement("span",{className:"help-block serverErrorMessage"},this.state.serverErrorMessage)))))}}]),a}(s.Component)),O=Object(m.g)(x),L=a(10),j=a(9),_=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).delta=function(){s.setState({count:s.state.count+1})},s.formatInput=function(e){var t=e.target.getAttribute("name");s.setState(Object(h.a)({},t,e.target.value.trim()))},s.handleFormSubmit=function(e){e.preventDefault(),s.validateFields()},s.saveNewQuestionInDB=function(){var e={questionnaireMongoID:s.state.questionnaireMongoID,questionText:s.state.questionTextInModal};Q(e).then((function(t){t.data.error?s.setState({errorResponse:t}):(e.mongoID=t.data.questionDoc._id,e.newMongoID=t.data.questionDoc._id,e.id=s.state.currentQuestionIndex,e.isCompleted=t.data.isCompleted,s.setState({showModal:!1}),s.state.questionData.push(e),s.forceUpdate())}))},s.updateQuestionInDB=function(){k(s.state.selectedQuestion).then((function(e){e.data.error?s.setState({errorResponse:e}):(s.setState({showModal:!1}),s.forceUpdate())}))},s.updateOrCreateQuestion=function(){if(s.state.questionTextValid)if(s.state.isNewQuestion)s.saveNewQuestionInDB();else{var e=s.state.questionData;e[s.state.currentQuestionIndex].questionText=s.state.questionTextInModal,s.setState({selectedQuestion:s.state.questionData[s.state.currentQuestionIndex],questionData:e}),s.updateQuestionInDB()}},s.closeModal=function(){s.setState({showModal:!1,questionTextInModal:"",currentQuestionCommentInModal:"",questionStatusInModal:"",questionUserAssignedInModal:"",formErrors:{questionDescription:""}})},s.createNewQuestionButton=function(){s.setState({showModal:!0,currentModalTitle:"Create Question",isNewQuestion:!0,questionTextInModal:""})},s.handleLogoutButtonClick=function(){window.location.reload(!1)},s.swapRenderCompletedQuestions=function(){s.state.showCompletedQuestions?s.setState({showCompletedQuestions:!1}):s.setState({showCompletedQuestions:!0})},s.swapRenderActiveQuestions=function(){s.state.showActiveQuestions?s.setState({showActiveQuestions:!1}):s.setState({showActiveQuestions:!0})},s.state={formErrors:{questionText:""},questionTextValid:!1,isLogin:!0,isNewQuestion:!1,selectedQuestion:"",currentModalTitle:"Edit Question",currentQuestionIndex:0,currentCompletedQuestionIndex:0,showModal:!1,showModal2:!1,questionData:[],filteredCompletedQuestionData:[],filteredQuestionData:[],users:[{text:"Tyler",id:"1"},{text:"Tawny",id:"2"},{text:"Anthony",id:"3"},{text:"Arthur",id:"4"}],currentQuestionCommentInModal:"",questionTextInModal:"",questionStatusInModal:"",questionUserAssignedInModal:"",userFilter:"",statusFilter:"",questionnaireMongoID:"",questionnaireNameInTitle:"",formSubmitButtonText:"Submit",userFirstName:"",userLastName:"",showActiveQuestions:!0,showCompletedQuestions:!1,isCurrentQuestionCompleted:!1},s}return Object(l.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(h.a)({},e.target.id,e.target.value))}},{key:"validateFields",value:function(){var e=this,t=this.state.formErrors,a=this.state.questionTextValid;a=this.state.questionTextInModal.length>0,t.questionText=a?"":"Please add Question Text.",this.setState({formErrors:t,questionTextValid:a},(function(){e.updateOrCreateQuestion()}))}},{key:"errorClass",value:function(e){return 0===e.length?"":"has-error"}},{key:"getQuestionsFromDB",value:function(){var e=this;console.log("I'm in getQuestions from DB  --- "+this.state.questinnaireMongoID),A(this.state.questionnaireMongoID).then((function(t){if(t.data.error)e.setState({errorResponse:t});else{for(var a=[],s=t.data.questionnaireDoc.questions,n=0;n<s.length;n++)a.push({mongoID:s[n]._id,id:e.state.currentQuestionIndex,questionText:s[n].questionText}),e.setState({currentQuestionIndex:e.state.currentQuestionIndex+1});e.setState({questionData:a}),e.forceUpdate(),e.putAllQuestionsIntoFilteredArray(),e.forceUpdate()}})).catch((function(e){return console.log(e)}))}},{key:"deleteQuestionInDB",value:function(e){var t=this;e.questionMongoID=e.mongoID,e.questionnaireMongoID=this.state.questionnaireMongoID,B(e).then((function(a){if(a.data.error)t.setState({errorResponse:a});else{if(a.data.deletedQuestionDoc.deletedCount>0){var s=t.state.questionData.indexOf(e);s>-1&&t.state.questionData.splice(s,1),t.adjustQuestionDataOrder()}t.forceUpdate()}}))}},{key:"editQuestionButton",value:function(e){this.adjustQuestionDataOrder(),this.setState({showModal:!0,currentModalTitle:"Edit Question",currentQuestionIndex:e.id,questionTextInModal:e.questionText,isNewQuestion:!1,selectedQuestion:e}),this.renderQuestionComments(e)}},{key:"deleteQuestionButton",value:function(e){this.deleteQuestionInDB(e)}},{key:"componentDidMount",value:function(){var e=this;this.setState({questionnaireMongoID:this.props.location.state.questionnaireMongoID,questionnaireNameInTitle:this.props.location.state.questionnaireName,userFirstName:this.props.location.state.userFirstName,userLastName:this.props.location.state.userLastName},(function(){e.getQuestionsFromDB()}))}},{key:"putAllQuestionsIntoFilteredArray",value:function(){var e=this;this.setState({filteredQuestionData:[]}),this.state.questionData.map((function(t){return e.state.filteredQuestionData.push(t)}))}},{key:"adjustQuestionDataOrder",value:function(){for(var e=0;e<this.state.questionData.length;e++)this.state.questionData[e].id=e}},{key:"completedCheck",value:function(e){var t=this;e.isCompleted?e.isCompleted=!1:e.isCompleted=!0,this.setState({selectedQuestion:e},(function(){t.updateQuestionInDB(),t.forceUpdate()}))}},{key:"render",value:function(){var e=this;return""!==this.state.userFilter||""!==this.state.statusFilter?(this.state.filteredQuestionData=[],this.state.questionData.map((function(t){var a=!1,s=!1;return e.state.statusFilter===t.status&&""!==e.state.statusFilter&&(s=!0),e.state.userFilter===t.userAssigned&&""!==e.state.userFilter&&(a=!0),s&&a&&!t.isCompleted||s&&""===e.state.userFilter&&!t.isCompleted||a&&""===e.state.statusFilter&&!t.isCompleted?e.state.filteredQuestionData.push(t):void 0}))):(this.state.filteredQuestionData=[],this.state.questionData.map((function(t){if(!t.isCompleted)return e.state.filteredQuestionData.push(t)}))),""!==this.state.userFilter||""!==this.state.statusFilter?(this.state.filteredCompletedQuestionData=[],this.state.questionData.map((function(t){var a=!1,s=!1;return e.state.statusFilter===t.status&&""!==e.state.statusFilter&&(s=!0),e.state.userFilter===t.userAssigned&&""!==e.state.userFilter&&(a=!0),s&&a&&t.isCompleted||s&&""===e.state.userFilter&&t.isCompleted||a&&""===e.state.statusFilter&&t.isCompleted?e.state.filteredCompletedQuestionData.push(t):void 0}))):(this.state.filteredCompletedQuestionData=[],this.state.questionData.map((function(t){if(t.isCompleted)return e.state.filteredCompletedQuestionData.push(t)}))),n.a.createElement(p,{id:"containerViewQuestions",fluid:"true"},n.a.createElement(L.b,{to:{pathname:"/landing-page",state:{userFirstName:this.state.userFirstName,userLastName:this.state.userLastName}},className:"logoutButton"},n.a.createElement(v,{id:"logoutButton",onClick:this.handleLogoutButtonClick.bind(this)},"Logout")," "),n.a.createElement(g,{id:"mainRow"},n.a.createElement(f,{size:"sm-12"},n.a.createElement("div",{className:"jumbotron jumbotron-fluid"},n.a.createElement(p,{id:"container",fluid:"true"},n.a.createElement("h1",{className:"display-4 QuestiontrackerTitle",id:"questionnaireTitle"},this.state.questionnaireNameInTitle),n.a.createElement("h2",{className:"display-4 QuestionTrackerTitle"},"Edit Questions"))),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(g,null,n.a.createElement(f,{size:"sm-2"},n.a.createElement(L.b,{to:"/profile",className:"log"},n.a.createElement(v,null,"View Profile"))),n.a.createElement(f,{size:"sm-2"},n.a.createElement(v,{type:"button",className:"btn btn-primary",onClick:this.createNewQuestionButton},"Create New Question"))),this.state.showActiveQuestions?n.a.createElement("div",null,n.a.createElement("h1",{className:"activeQuestionsTitle"},"Active Questions"),this.state.questionData.length?n.a.createElement("table",{id:"questionViewTable_Table",className:"table table-hover questionViewTable_Table"},n.a.createElement("thead",{id:"questionViewTable_head",className:"thead-dark"},n.a.createElement("tr",null,n.a.createElement("th",{className:"questionViewTable_th",scope:"col"},"Question"),n.a.createElement("th",{className:"questionViewTable_th",scope:"col"}),n.a.createElement("th",{className:"questionViewTable_th",scope:"col"}))),n.a.createElement("tbody",null,this.state.filteredQuestionData.map((function(t){return n.a.createElement("tr",{className:"questionViewTable_tr",key:t.mongoID},n.a.createElement("td",{id:"titleColumn",className:"questionViewTable_td"},t.questionText),n.a.createElement("td",{id:"editColumn",className:"questionViewTable_td"},n.a.createElement(v,{variant:"primary",onClick:function(){return e.editQuestionButton(t)}},"Edit")),n.a.createElement("td",{id:"deleteColumn",className:"questionViewTable_td"}," ",n.a.createElement(v,{variant:"primary",onClick:function(){return e.deleteQuestionButton(t)}},"Delete")))})))):n.a.createElement("h3",{className:"noResultsMessage"}," No Results to Display ")):"",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(j.a,{show:this.state.showModal,animation:!1},n.a.createElement(j.a.Header,null,n.a.createElement(v,{className:"btn btn-danger note-delete xButton",id:"questionModalXButton",onClick:function(){return e.closeModal()}},"X"),n.a.createElement(j.a.Title,null,n.a.createElement("h3",null,this.state.currentModalTitle))),n.a.createElement(j.a.Body,null,n.a.createElement("br",null),n.a.createElement(w,{label:"Description",onBlur:this.formatInput.bind(this),value:this.state.questionTextInModal,id:"questionTextInModal",onChange:this.handleChange.bind(this),name:"questionTextInModal"})),n.a.createElement(j.a.Footer,null,n.a.createElement(v,{variant:"primary",onClick:this.handleFormSubmit},"Submit"))))))}}]),a}(s.Component),U=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).formatInput=function(e){var t=e.target.getAttribute("name");s.setState(Object(h.a)({},t,e.target.value.trim()))},s.saveQuestionnaireInDB=function(){},s.handleFormSubmit=function(e){e.preventDefault(),s.validateFields()},s.state={questionnaireID:s.props.match.params.questionnaireID,questionnaireName:"",questions:[]},s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getQuestionnaireFromDB()}},{key:"getQuestionnaireFromDB",value:function(){var e=this,t={questionnaireID:this.state.questionnaireID};F(t).then((function(t){t.data.error||(console.log("I got questionnaire back from DB!"),console.log(t),null!==t.data.questions&&e.setState({questionnaireData:t.data,questionnaireName:t.data.name,questions:t.data.questions}))})).catch((function(e){return console.log(e)}))}},{key:"handleChange",value:function(e){this.setState(Object(h.a)({},e.target.id,e.target.value))}},{key:"validateFields",value:function(){}},{key:"errorClass",value:function(e){return 0===e.length?"":"has-error"}},{key:"render",value:function(){var e=this;return n.a.createElement(p,{id:"containerViewQuestions",fluid:"true"},n.a.createElement(g,{id:"mainRow"},n.a.createElement(f,{size:"sm-12"},n.a.createElement("div",{className:"jumbotron jumbotron-fluid"},n.a.createElement("h1",null,this.state.questionnaireName)),n.a.createElement("br",null),this.state.questions?n.a.createElement("div",null,n.a.createElement("form",null,this.state.questions.map((function(t){return n.a.createElement("div",null,n.a.createElement("h3",null,t.questionText),n.a.createElement("select",{value:e.state.userFilter,onChange:e.handleChange.bind(e),id:"questionHTML",name:"questionHTML"},n.a.createElement("option",{className:"dropdown-item",href:"#",value:"Yes"},"Yes"),n.a.createElement("option",{className:"dropdown-item",href:"#",value:"No"},"No"),"}"))}))),n.a.createElement(v,{type:"button",className:"btn btn-primary",onClick:this.saveQuestionnaireInDB},"Submit")):"")))}}]),a}(s.Component),R=(a(64),function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).formatInput=function(e){var t=e.target.getAttribute("name");s.setState(Object(h.a)({},t,e.target.value.trim()))},s.handleChangePasswordButtonClick=function(e){s.setState({showModal:!0,currentModalTitle:"Change Password",setPasswordFieldsActiveInModal:!0})},s.updatePasswordInDB=function(){var e={password:s.state.oldPassword,newPassword:s.state.newPassword1,username:s.props.username,mongoID:s.props.mongoID};q(e).then((function(e){e.data.error?s.setState({serverErrorMessage:e.data.error,formErrors:{oldPassword:"",newPassword1and2:"",questionnaireName:"",questionnaireID:"",serverErrorMessage:""}}):(s.setState({successMessage:"Successfully updated password."}),s.closeModal())}))},s.closeModal=function(){s.setState({showModal:!1,questionnaireIDValid:!0,questionnaireNameValid:!0,oldPasswordValid:!0,newPassword1Valid:!0,newPassword2Valid:!0,questionnaireNameInModal:"",questionnaireIDInModal:"",oldPassword:"",newPassword:"",newPassword2:"",serverErrorMessage:"",formErrors:{oldPassword:"",newPassword1and2:"",questionnaireName:"",questionnaireID:"",serverErrorMessage:"",formSubmitButtonText:"Submit"}})},s.handleCreateQuestionnaireButtonClick=function(e){s.setState({showModal:!0,currentModalTitle:"Create Questionnaire",setPasswordFieldsActiveInModal:!1,setCreateQuestionnaireFieldsActiveInModal:!0,setJoinQuestionnaireFieldsActiveInModal:!1,setConfirmationBoxActiveInModal:!1,successMessage:"",questionnaireIDInModal:"",questionnaireNameInModal:""})},s.handleJoinQuestionnaireButtonClick=function(e){s.setState({showModal:!0,currentModalTitle:"Join Questionnaire",setPasswordFieldsActiveInModal:!1,setCreateQuestionnaireFieldsActiveInModal:!1,setConfirmationBoxActiveInModal:!1,successMessage:"",setJoinQuestionnaireFieldsActiveInModal:!0})},s.handleSubmitButtonInModalClick=function(){s.state.setConfirmationBoxActiveInModal?s.setState({setConfirmationBoxActiveInModal:!1,showModal:!1},(function(){s.handleDeleteQuestionnaireInDB(s.state.currentQuestionnaire)})):s.validateFields()},s.handleLogoutButtonClick=function(){window.location.reload(!1)},s.state={firstName:"",loggedIn:s.props.loggedIn,redirectTo:null,setPasswordFieldsActiveInModal:!1,setCreateQuestionnaireFieldsActiveInModal:!1,setJoinQuestionnaireFieldsActiveInModal:!1,setEditQuestionnaireFieldsActiveInModal:!1,setConfirmationBoxActiveInModal:!1,formErrors:{oldPassword:"",newPassword1and2:"",questionnaireName:"",questionnaireID:""},oldPassword:"",newPassword1:"",newPassword2:"",questionnaireNameInModal:"",questionnaireIDInModal:"",questionnaireMongoIDInModal:"",oldPasswordValid:!0,newPassword1And2Valid:!1,questionnaireNameValid:!1,questionnaireIDValid:!1,showModal:!1,formSubmitButtonText:"Submit",successMessage:"",serverErrorMessage:"",currentModalTitle:"",userFirstName:"",userLastName:"",userData:[],questionnaires:[]},s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({userFirstName:this.props.firstName,userLastName:this.props.lastName}),this.getQuestionnairesOfUserInDB()}},{key:"handleChange",value:function(e){this.setState(Object(h.a)({},e.target.id,e.target.value))}},{key:"errorClass",value:function(e){return 0===e.length?"":"has-error"}},{key:"validateFields",value:function(){var e=this,t=this.state.formErrors,a=this.state.newPassword1And2Valid,s=this.state.questionnaireNameValid,n=this.state.questionnaireIDValid;a=this.state.newPassword1===this.state.newPassword2&&this.state.newPassword1.length>=6,t.newPassword1and2="New password doesn't match or your password is less than 8 characters long.",s=this.state.questionnaireNameInModal.length>=3,t.questionnaireName="Questionnaire Name must have atleast three characters.",n=this.state.questionnaireIDInModal.length>=6,t.questionnaireID="Questionnaire ID must have atleast six characters.",this.setState({formErrors:t,newPassword1And2Valid:a,questionnaireIDValid:n,questionnaireNameValid:s},(function(){e.state.setJoinQuestionnaireFieldsActiveInModal?n&&e.attachUserToQuestionnaireInDB():e.state.setCreateQuestionnaireFieldsActiveInModal?s&&n&&e.saveQuestionnaireInDB():e.state.setEditQuestionnaireFieldsActiveInModal?s&&n&&e.updateQuestionnaireInDB():e.state.setPasswordFieldsActiveInModal&&a&&e.updatePasswordInDB()}))}},{key:"handleEditQuestionnaireButtonClick",value:function(e){this.setState({showModal:!0,currentModalTitle:"Edit Questionnaire",setCreateQuestionnaireFieldsActiveInModal:!1,setEditQuestionnaireFieldsActiveInModal:!0,setJoinQuestionnaireFieldsActiveInModal:!1,setPasswordFieldsActiveInModal:!1,setConfirmationBoxActiveInModal:!1,successMessage:"",questionnaireMongoIDInModal:e._id,questionnaireNameInModal:e.name,questionnaireIDInModal:e.questionnaireID})}},{key:"handleDeleteOrLeaveButtonClick",value:function(e){this.setState({setConfirmationBoxActiveInModal:!0,showModal:!0,currentQuestionnaire:e,currentModalTitle:"",setPasswordFieldsActiveInModal:!1,setCreateQuestionnaireFieldsActiveInModal:!1,setJoinQuestionnaireFieldsActiveInModal:!1,formSubmitButtonText:"Confirm",successMessage:"",questionnaireIDInModal:"",questionnaireNameInModal:""})}},{key:"saveQuestionnaireInDB",value:function(){var e=this,t={password:this.state.oldPassword,newPassword:this.state.newPassword1,username:this.props.username,mongoID:this.props.mongoID,questionnaireName:this.state.questionnaireNameInModal,questionnaireID:this.state.questionnaireIDInModal,userFirstName:this.props.firstName,userLastName:this.props.lastName};P(t).then((function(t){t.data.error?e.setState({serverErrorMessage:t.data.error}):(e.closeModal(),e.getQuestionnairesOfUserInDB(),e.forceUpdate())})).catch((function(e){return console.log(e)}))}},{key:"getQuestionnairesOfUserInDB",value:function(){var e=this,t={password:this.state.oldPassword,newPassword:this.state.newPassword1,username:this.props.username,mongoID:this.props.mongoID};T(t).then((function(t){t.data.error||(console.log("I got questionnaires back from DB!"),console.log(t),e.setState({questionnaires:t.data.questionnaires}))})).catch((function(e){return console.log(e)}))}},{key:"attachUserToQuestionnaireInDB",value:function(){var e=this,t={password:this.state.oldPassword,newPassword:this.state.newPassword1,username:this.props.username,mongoID:this.props.mongoID,questionnaireID:this.state.questionnaireIDInModal,userFirstName:this.props.firstName,userLastName:this.props.lastName};S(t).then((function(t){t.data.error?e.setState({serverErrorMessage:t.data.error}):(e.setState({questionnaires:t.data.questionnaires,successMessage:"You successfully joined the questionnaire!"}),e.closeModal(),e.getQuestionnairesOfUserInDB(),e.forceUpdate())})).catch((function(e){return console.log(e)}))}},{key:"handleDeleteQuestionnaireInDB",value:function(e){var t=this,a=!1;this.props.mongoID===e.userWhoCreatedOrgMongoID&&(a=!0);var s={questionnaireMongoID:e._id,userMongoID:this.props.mongoID,questionnaireData:e,isUserQuestionnaireOwner:a,userFirstName:this.state.userFirstName,userLastName:this.state.userLastName};y(s).then((function(e){t.setState({currentQuestionnaire:""}),t.getQuestionnairesOfUserInDB(),t.forceUpdate()})).catch((function(e){return console.log(e)}))}},{key:"updateQuestionnaireInDB",value:function(){var e=this,t={password:this.state.oldPassword,newPassword:this.state.newPassword1,username:this.props.username,mongoID:this.props.mongoID,questionnaireMongoID:this.state.questionnaireMongoIDInModal,questionnaireName:this.state.questionnaireNameInModal,questionnaireID:this.state.questionnaireIDInModal,userFirstName:this.props.firstName,userLastName:this.props.lastName};V(t).then((function(t){t.data.error||(e.closeModal(),e.getQuestionnairesOfUserInDB(),e.forceUpdate())})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return n.a.createElement(p,{id:"containerViewQuestions",fluid:"true"},n.a.createElement(L.b,{to:{pathname:"/landing-page",state:{userFirstName:this.state.userFirstName,userLastName:this.state.userLastName}},className:"logoutButton"},n.a.createElement(v,{id:"logoutButton",onClick:this.handleLogoutButtonClick.bind(this)},"Logout")," "),n.a.createElement(g,{id:"mainRow"},n.a.createElement(f,{size:"sm-12"},n.a.createElement("div",{className:"jumbotron jumbotron-fluid"},n.a.createElement(p,{id:"container",fluid:"true"},n.a.createElement("h1",{className:"display-4 QuestionTrackerTitle"},"Welcome, ",this.props.firstName,"!"),n.a.createElement("h2",{className:"display-4 QuestionTrackerTitle",id:"successMessage"},this.state.successMessage))),n.a.createElement(v,{onClick:this.handleChangePasswordButtonClick.bind(this)},"Change Password"),n.a.createElement(v,{onClick:this.handleCreateQuestionnaireButtonClick.bind(this)},"Create Questionnaire"),n.a.createElement(v,{onClick:this.handleJoinQuestionnaireButtonClick.bind(this)},"Answer Questionnaire"),n.a.createElement("br",null),n.a.createElement("br",null),this.state.questionnaires.length>0?n.a.createElement("table",{id:"questionnaireTable_Table",className:"table table-hover questionViewTable_Table"},n.a.createElement("thead",{id:"questionnaireTable_head",className:"thead-dark"},n.a.createElement("tr",null,n.a.createElement("th",{className:"questionnaireTable_th",scope:"col"},"Name"),n.a.createElement("th",{className:"questionnaireTable_th",scope:"col"},"Questionnaire ID"),n.a.createElement("th",{className:"questionnaireTable_th",scope:"col"}),n.a.createElement("th",{className:"questionnaireTable_th",scope:"col"}),n.a.createElement("th",{className:"questionnaireTable_th",scope:"col"}))),n.a.createElement("tbody",null,this.state.questionnaires.map((function(t){return n.a.createElement("tr",{className:"questionnaireTable_tr",key:t._id},n.a.createElement("td",{id:"questionnaireNameColumn",className:"questionnaireTable_td"},t.name),n.a.createElement("td",{id:"questionnaireIDColumn",className:"questionnaireTable_td"},t.questionnaireID),n.a.createElement("td",{id:"viewQuestionColumn",className:"questionnaireTable_td"},n.a.createElement(L.b,{to:{pathname:"/create-questionnaire",state:{questionnaireMongoID:t._id,questionnaireName:t.name,questionnaireUsers:t.users,userFirstName:e.state.userFirstName,userLastName:e.state.userLastName}},className:"log"},n.a.createElement(v,null,"Edit Questions"))),n.a.createElement("td",{id:"editColumn",className:"questionnaireTable_td"},e.props.mongoID===t.userWhoCreatedOrgMongoID?n.a.createElement(v,{variant:"primary",onClick:function(){return e.handleEditQuestionnaireButtonClick(t)}},"Edit Questionnaire"):""),n.a.createElement("td",{id:"deleteColumn",className:"questionnaireTable_td"},e.props.mongoID===t.userWhoCreatedOrgMongoID?n.a.createElement(v,{variant:"primary",onClick:function(){return e.handleDeleteOrLeaveButtonClick(t)}},"Delete"):n.a.createElement(v,{variant:"primary",onClick:function(){return e.handleDeleteOrLeaveButtonClick(t)}},"Leave")))})))):n.a.createElement("h3",{id:"noResultsHeader"}," No Results to Display "),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(j.a,{show:this.state.showModal,animation:!1},n.a.createElement(j.a.Header,null,n.a.createElement(j.a.Title,null,n.a.createElement("h3",null,this.state.currentModalTitle))),n.a.createElement(j.a.Body,null,this.state.setConfirmationBoxActiveInModal?n.a.createElement("h1",{id:"confirmationHeader"},"Are you sure?"):n.a.createElement("div",null,this.state.setPasswordFieldsActiveInModal?n.a.createElement("div",null,n.a.createElement(E,{type:"password",label:"Old Password",onBlur:this.formatInput.bind(this),isvalid:this.state.oldPasswordValid.toString(),fielderror:this.state.formErrors.oldPassword,formgroupclass:"form-group ".concat(this.errorClass(this.state.formErrors.oldPassword)),value:this.state.oldPassword,id:"oldPassword",onChange:this.handleChange.bind(this),name:"oldPassword"}),n.a.createElement(E,{type:"password",label:"New Password",onBlur:this.formatInput.bind(this),isvalid:this.state.newPassword1And2Valid.toString(),fielderror:this.state.formErrors.newPassword1and2,formgroupclass:"form-group ".concat(this.errorClass(this.state.formErrors.newPassword1and2)),value:this.state.newPassword1and2,id:"newPassword1",onChange:this.handleChange.bind(this),name:"newPassword1"}),n.a.createElement(E,{type:"password",label:"Confirm New Password",onBlur:this.formatInput.bind(this),isvalid:this.state.newPassword1And2Valid.toString(),fielderror:this.state.formErrors.newPassword1and2,formgroupclass:"form-group ".concat(this.errorClass(this.state.formErrors.newPassword1and2)),value:this.state.newPassword2,id:"newPassword2",onChange:this.handleChange.bind(this),name:"newPassword2"})):n.a.createElement("div",null,this.state.setJoinQuestionnaireFieldsActiveInModal?n.a.createElement("div",null,n.a.createElement(E,{label:"Please enter the Questionnaire ID of the questionnaire you wish to join:",onBlur:this.formatInput.bind(this),isvalid:this.state.questionnaireIDValid.toString(),fielderror:this.state.formErrors.questionnaireID,formgroupclass:"form-group ".concat(this.errorClass(this.state.formErrors.questionnaireID)),value:this.state.questionnaireIDInModal,id:"questionnaireIDInModal",onChange:this.handleChange.bind(this),name:"questionnaireIDInModal"})):n.a.createElement("div",null,n.a.createElement(E,{label:"Questionnaire Name",onBlur:this.formatInput.bind(this),isvalid:this.state.questionnaireNameValid.toString(),fielderror:this.state.formErrors.questionnaireName,formgroupclass:"form-group ".concat(this.errorClass(this.state.formErrors.questionnaireName)),value:this.state.questionnaireNameInModal,id:"questionnaireNameInModal",onChange:this.handleChange.bind(this),name:"questionnaireNameInModal"}),n.a.createElement(E,{label:"Questionnaire ID (Use this ID to invite people)",onBlur:this.formatInput.bind(this),isvalid:this.state.questionnaireIDValid.toString(),fielderror:this.state.formErrors.questionnaireID,formgroupclass:"form-group ".concat(this.errorClass(this.state.formErrors.questionnaireID)),value:this.state.questionnaireIDInModal,id:"questionnaireIDInModal",onChange:this.handleChange.bind(this),name:"questionnaireIDInModal"})))),n.a.createElement("span",{className:"help-block serverErrorMessage"},this.state.serverErrorMessage)),n.a.createElement(j.a.Footer,null,n.a.createElement(v,{variant:"secondary",onClick:this.closeModal},"Cancel"),n.a.createElement(v,{variant:"primary",onClick:this.handleSubmitButtonInModalClick.bind(this)},this.state.formSubmitButtonText))))))}}]),a}(s.Component)),J=Object(m.g)(R),H=(a(65),function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={loggedIn:!1,user:null,userId:null,firstName:null,lastName:null,mongoID:null,password:null,redirectTo:null,serverErrorMessage:""},e._login=e._login.bind(Object(u.a)(e)),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;N().then((function(t){t.data.user?e.setState({loggedIn:!0,userId:t.data.user._id}):e.setState({loggedIn:!1,user:null})}))}},{key:"_login",value:function(e,t){var a=this;D({username:e,password:t}).then((function(e){200===e.status&&(e.data.loggedInSuccess?a.setState({loggedIn:!0,username:e.data.username,mongoID:e.data.mongoID,firstName:e.data.firstName,lastName:e.data.lastName,password:e.data.password,redirectTo:"/profile"}):a.setState({loggedIn:!1,serverErrorMessage:e.data.error},(function(){a.forceUpdate()})))}))}},{key:"render",value:function(){var e=this;return this.state.loggedIn?n.a.createElement("div",{className:"App"},n.a.createElement("div",null,n.a.createElement(m.a,{exact:!0,to:{pathname:this.state.redirectTo},render:function(){return n.a.createElement(O,{_login:e._login,serverErrorMessage:e.state.serverErrorMessage})}}),n.a.createElement(m.b,{exact:!0,path:"/landing-page",render:function(){return n.a.createElement(O,{_login:e._login,serverErrorMessage:e.state.serverErrorMessage})}}),n.a.createElement(m.b,{exact:!0,path:"/create-questionnaire",component:_}),n.a.createElement(m.b,{exact:!0,path:"/profile",render:function(){return n.a.createElement(J,{loggedIn:e.state.loggedIn,username:e.state.username,mongoID:e.state.mongoID,firstName:e.state.firstName,lastName:e.state.lastName})}}),n.a.createElement(m.b,{exact:!0,path:"/",render:function(){return n.a.createElement(m.a,{to:"/landing-page"})}}))):n.a.createElement("div",{className:"App"},n.a.createElement("div",null,n.a.createElement(m.b,{exact:!0,path:"/landing-page",render:function(){return n.a.createElement(O,{_login:e._login,serverErrorMessage:e.state.serverErrorMessage})}}),n.a.createElement(m.b,{exact:!0,path:"/",render:function(){return n.a.createElement(m.a,{to:"/landing-page"})}}),n.a.createElement(m.b,{exact:!0,path:"/answer-questionnaire/:questionnaireID",render:function(e){return n.a.createElement(U,e)}})))}}]),a}(s.Component));i.a.render(n.a.createElement(L.a,null,n.a.createElement(m.d,null,n.a.createElement(m.b,{component:H}))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.e7e0cecf.chunk.js.map